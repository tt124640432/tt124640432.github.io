(function(t){function e(e){for(var n,i,r=e[0],c=e[1],l=e[2],d=0,u=[];d<r.length;d++)i=r[d],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&u.push(o[i][0]),o[i]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);A&&A(e);while(u.length)u.shift()();return a.push.apply(a,l||[]),s()}function s(){for(var t,e=0;e<a.length;e++){for(var s=a[e],n=!0,i=1;i<s.length;i++){var r=s[i];0!==o[r]&&(n=!1)}n&&(a.splice(e--,1),t=c(c.s=s[0]))}return t}var n={},i={app:0},o={app:0},a=[];function r(t){return c.p+"js/"+({}[t]||t)+"."+{"chunk-6d90f167":"cbb40c54"}[t]+".js"}function c(e){if(n[e])return n[e].exports;var s=n[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,c),s.l=!0,s.exports}c.e=function(t){var e=[],s={"chunk-6d90f167":1};i[t]?e.push(i[t]):0!==i[t]&&s[t]&&e.push(i[t]=new Promise((function(e,s){for(var n="css/"+({}[t]||t)+"."+{"chunk-6d90f167":"82242ca6"}[t]+".css",o=c.p+n,a=document.getElementsByTagName("link"),r=0;r<a.length;r++){var l=a[r],d=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(d===n||d===o))return e()}var u=document.getElementsByTagName("style");for(r=0;r<u.length;r++){l=u[r],d=l.getAttribute("data-href");if(d===n||d===o)return e()}var A=document.createElement("link");A.rel="stylesheet",A.type="text/css",A.onload=e,A.onerror=function(e){var n=e&&e.target&&e.target.src||o,a=new Error("Loading CSS chunk "+t+" failed.\n("+n+")");a.code="CSS_CHUNK_LOAD_FAILED",a.request=n,delete i[t],A.parentNode.removeChild(A),s(a)},A.href=o;var f=document.getElementsByTagName("head")[0];f.appendChild(A)})).then((function(){i[t]=0})));var n=o[t];if(0!==n)if(n)e.push(n[2]);else{var a=new Promise((function(e,s){n=o[t]=[e,s]}));e.push(n[2]=a);var l,d=document.createElement("script");d.charset="utf-8",d.timeout=120,c.nc&&d.setAttribute("nonce",c.nc),d.src=r(t);var u=new Error;l=function(e){d.onerror=d.onload=null,clearTimeout(A);var s=o[t];if(0!==s){if(s){var n=e&&("load"===e.type?"missing":e.type),i=e&&e.target&&e.target.src;u.message="Loading chunk "+t+" failed.\n("+n+": "+i+")",u.name="ChunkLoadError",u.type=n,u.request=i,s[1](u)}o[t]=void 0}};var A=setTimeout((function(){l({type:"timeout",target:d})}),12e4);d.onerror=d.onload=l,document.head.appendChild(d)}return Promise.all(e)},c.m=t,c.c=n,c.d=function(t,e,s){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(c.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)c.d(s,n,function(e){return t[e]}.bind(null,n));return s},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/",c.oe=function(t){throw console.error(t),t};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],d=l.push.bind(l);l.push=e,l=l.slice();for(var u=0;u<l.length;u++)e(l[u]);var A=d;a.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"034f":function(t,e,s){"use strict";var n=s("85ec"),i=s.n(n);i.a},"14c3":function(t,e,s){"use strict";var n=s("c8f0"),i=s.n(n);i.a},"1a03":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAACiUlEQVR4Xu2ZzY4NQRTHz+k3wBuw8AI8gIXZqtMJQsKCBUtCQkLiTkJCQliyYEFCjKT/ZTsWHsC8gAVvgDfoko6ZWYzbt6pun67byT297fP5q1OnTlczrfnDa54/GQCrgDUnYFtgzQvAmuDKtoCIfCaiE7sVuAPgzCqqcSUARCTMSxZA8XiKOxSR30R0qGe1/wA4XLISigIQkR9EdDSS4E8Ax0pBKAagrutvIYS9Pb8wP2beaZrmZAkIRQCIyDYRnc5M6AuAjUydbPHRAYjIRyI6lx3ZP4UtAOeX1E1SGxWAiLwkomtJkfQLvQJwfaCNXvXRANR1/TyEcEMjcGZ+0TTNTQ1bB22MAsA595SZb2kGHEJ45r2/rWmzs6UOQEQeE9Ed7UB37T0BcFfTtioAEXlIRPc0A5xj6xGA+1o+1ADUdT0LITzQCmyRHWbebJpmpuFLBYBz7hIzv9UIKNVGCOGy9/5dqnyfnAoAEdkiorNDg8nU/wRg2fli35UWgPdEdCEzgaHiHwBcHGpEBYBzbsbMRfb/XsIhhE3v/eA+oAKgC0pEXhPRlaErkqj/BsDVRNmFYmoAOi/OuY2qqo63bXvkv4krs0K6FT5oo6qqX23bfvfedx9XKo8qgEUR9d0C9emUuh0yACp1lGDEKqDnItS2QA8B6wGFrsitCSb0LxURa4LWBOf/DrNTwE6B+QTsGLRjsMyvcpsDVA75BCM2B9gcYHPA14Sdsi8C4FSO/LKyxZrgsgGOrWcAxiY8dftWAbEV6v76xGSm/D729yhaAbkDzNRgxD6qDEBsxawCMkfYGNDS720LRO4Voj2g9IqV9mcAShOfmj+rgKmtSOl4rAJKE5+av7WvgL+scN9BhE5uQgAAAABJRU5ErkJggg=="},"1d05":function(t,e,s){},"2b82":function(t,e,s){"use strict";var n=s("431f"),i=s.n(n);i.a},"431f":function(t,e,s){},4360:function(t,e,s){"use strict";var n=s("2b0e"),i=s("2f62"),o=s("0e44");n["default"].use(i["a"]),e["a"]=new i["a"].Store({plugins:[Object(o["a"])({storage:sessionStorage})],state:{id:"",userInfo:{avatar:"",nickname:"",cellphone:""}},mutations:{setUserId:function(t,e){return t.id=e},setUserInfo:function(t,e){return t.userInfo=e}},actions:{setUserId:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t.commit("setUserId",e)},setUserInfo:function(t,e){t.commit("setUserInfo",e)}},modules:{}})},"4db8":function(t,e,s){"use strict";var n=s("1d05"),i=s.n(n);i.a},"56d7":function(t,e,s){"use strict";s.r(e);s("45fc"),s("e260"),s("e6cf"),s("cca6"),s("a79d");var n=s("2b0e"),i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("router-view")],1)},o=[],a=(s("034f"),s("2877")),r={},c=Object(a["a"])(r,i,o,!1,null,null,null),l=c.exports,d=(s("d3b7"),s("8c4f")),u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"warpBox"},[n("div",{staticClass:"left boxBorder"},[n("div",{ref:"chats",staticClass:"chats"},[n("ChatMessage",{attrs:{messageList:t.messageList,sendIndex:t.sendIndex,userInfo:t.userInfo}})],1),n("div",{staticClass:"inputBox inputBoxBg",attrs:{id:"inputBox"}},[n("div",{staticClass:"voice pointer",on:{click:function(){t.showRecorder=!0}}},[n("img",{attrs:{src:s("9e56"),alt:"voice"}})]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],staticClass:"input",domProps:{value:t.content},on:{input:function(e){e.target.composing||(t.content=e.target.value)}}}),t._v(" "),n("div",{staticClass:"sendBtn btn pointer",on:{click:function(e){return t.sendChat("text")}}},[t._v("发送")]),t.showRecorder?[n("Recorder",{attrs:{sendRec:t.sendRec,hiddenRecorder:t.hiddenRecorder}})]:t._e()],2)]),n("div",{staticClass:"right boxBorder"},[n("div",{staticClass:"userInfo"},[n("div",{staticClass:"userAvatar"},[n("img",{attrs:{src:t.userInfo.avatar,alt:"avater"}}),n("img",{attrs:{src:t.userInfo.avatar,alt:"avater"}})]),n("div",{staticClass:"userName"},[n("span",[t._v(t._s(t.userInfo.nickname||t.userId.substring(0,9)))]),n("div",{staticClass:"userButton"},[n("div",{staticClass:"pointer",on:{click:function(e){return t.setInfo(!0)}}},[n("img",{attrs:{src:s("73a0"),alt:"avater"}}),t._v(" 设置 ")]),n("div",{staticClass:"pointer",on:{click:t.exit}},[n("img",{attrs:{src:s("8c7b"),alt:"avater"}}),t._v(" 退出 ")])])])]),t._l(this.userList,(function(e){return n("div",{key:e.id,staticClass:"user"},[n("img",{attrs:{src:e.avatar,alt:"avater"}}),n("span",[t._v(t._s(e.nickname||e.id.substring(0,9)))])])}))],2)]),n("transition",{attrs:{name:"fade"}},[t.showInfo?n("Info",{attrs:{userList:t.userList,setInfo:t.setInfo,userInfo:t.userInfo}}):t._e()],1)],1)},A=[],f=(s("4de4"),s("c975"),s("3835")),h=s("5530"),g=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"main inputBoxBg"},[t._t("top"),t.showRecStop?s("div",{staticClass:"btn sendBtn pointer",on:{click:t.recStop}},[t._v("点击结束录音")]):t._e(),t.showRecStop?t._e():s("div",{staticClass:"btn sendBtn pointer cancel",on:{click:t.recCancel}},[t._v("取消录音")]),t.showRecStop?t._e():s("div",{staticClass:"btn sendBtn pointer start",on:{click:t.recStart}},[t._v("点击开始录音")]),s("div",{staticClass:"mainBox",class:t.showMainBox?"showMainBox":""},[s("div",{staticClass:"ctrlProcessWave",staticStyle:{height:"100px",width:"300px",border:"1px solid #ccc","box-sizing":"border-box",display:"inline-block","vertical-align":"bottom"}})]),t.recOpenDialogShow?s("div",{staticStyle:{"z-index":"99999",width:"100%",height:"100%",top:"0",left:"0",position:"fixed",background:"rgba(0,0,0,0.3)"}},[s("div",{staticStyle:{display:"flex",height:"100%","align-items":"center"}},[s("div",{staticStyle:{flex:"1"}}),s("div",{staticStyle:{width:"240px",background:"#fff",padding:"15px 20px","border-radius":"10px"}},[s("div",{staticStyle:{"padding-bottom":"10px"}},[t._v("录音功能需要麦克风权限，请允许；如果未看到任何请求，请点击忽略~")]),s("div",{staticStyle:{"text-align":"center"}},[s("a",{staticStyle:{color:"#0B1"},on:{click:t.waitDialogClick}},[t._v("忽略")])])]),s("div",{staticStyle:{flex:"1"}})])]):t._e()],2)},p=[],m=(s("a434"),s("e2cc")),v=s.n(m),b={props:["sendRec","hiddenRecorder"],data:function(){return{type:"mp3",bitRate:16,sampleRate:16e3,rec:0,duration:0,powerLevel:0,recOpenDialogShow:0,logs:[],showRecStop:!1,time:null,showMainBox:!1,startTime:0}},mounted:function(){this.recOpen()},methods:{recOpen:function(){var t=this,e=this.rec=v()({type:t.type,bitRate:t.bitRate,sampleRate:t.sampleRate,onProcess:function(e,s,n,i){t.duration=n,t.powerLevel=s,t.wave.input(e[e.length-1],s,i)}});t.dialogInt=setTimeout((function(){t.showDialog()}),8e3),e.open((function(){t.dialogCancel(),t.reclog("已打开:"+t.type+" "+t.sampleRate+"hz "+t.bitRate+"kbps",2),t.wave=v.a.WaveView({elem:".ctrlProcessWave"})}),(function(e,s){t.dialogCancel(),t.reclog((s?"UserNotAllow，":"")+"打开失败："+e,1)})),t.waitDialogClickFn=function(){t.dialogCancel(),t.reclog("打开失败：权限请求被忽略，用户主动点击的弹窗",1)}},timeLimit:function(){var t=this;this.showRecStop=!0,this.time=setTimeout((function(){t.recStop()}),5999)},recCancel:function(){this.rec.stop((function(){}),(function(){}),!0),this.hiddenRecorder()},recStart:function(){if(this.rec){this.rec.start(),this.startTime=+new Date,this.showMainBox=!0,this.timeLimit();var t=this.rec.set;this.reclog("录制中："+t.type+" "+t.sampleRate+"hz "+t.bitRate+"kbps")}else this.reclog("未打开录音",1)},recStop:function(){var t=this,e=t.rec,s=new FileReader;t.rec=null,this.time=null,e?(e.stop((function(t){s.readAsDataURL(t)}),(function(e){t.reclog("结束出错："+e,1)}),!0),s.onloadend=function(){t.sendRec(s.result,e.envInLast-e.envInFirst)}):t.reclog("未打开录音",1)},reclog:function(t,e,s){this.logs.splice(0,0,{idx:this.logs.length,msg:t,color:e,res:s,playMsg:"",down:0,down64Val:""})},getTime:function(){var t=new Date,e=("0"+t.getHours()).substr(-2)+":"+("0"+t.getMinutes()).substr(-2)+":"+("0"+t.getSeconds()).substr(-2);return e},showDialog:function(){/mobile/i.test(navigator.userAgent)&&(this.recOpenDialogShow=1)},dialogCancel:function(){clearTimeout(this.dialogInt),this.recOpenDialogShow=0},waitDialogClick:function(){this.dialogCancel(),this.waitDialogClickFn()}}},w=b,C=(s("2b82"),Object(a["a"])(w,g,p,!1,null,"1b12d49e",null)),I=C.exports,k=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"infoBox boxBorder"},[s("div",{staticClass:"userInfo"},[s("div",{staticClass:"userAvatar"},[s("img",{attrs:{src:t.userInfo.avatar,alt:"avater"}}),s("img",{attrs:{src:t.userInfo.avatar,alt:"avater"}})])]),s("div",{staticClass:"setInfo"},[s("div",{staticClass:"inputBox"},[s("label",[t._v("昵称")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.nickname,expression:"nickname"}],attrs:{type:"text",placeholder:t.userInfo.nickname},domProps:{value:t.nickname},on:{input:function(e){e.target.composing||(t.nickname=e.target.value)}}})]),s("div",{staticClass:"inputBox"},[s("label",[t._v("手机")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.cellphone,expression:"cellphone"}],attrs:{type:"text",placeholder:t.userInfo.cellphone},domProps:{value:t.cellphone},on:{input:function(e){e.target.composing||(t.cellphone=e.target.value)}}}),s("span",{directives:[{name:"show",rawName:"v-show",value:t.errMsg,expression:"errMsg"}],staticClass:"err"},[t._v(t._s(t.errMsg))])]),s("PicUpLoad",{attrs:{setImg:t.setImg}})],1),s("div",{staticClass:"bottom"},[s("div",{staticClass:"sendBtn btn pointer",on:{click:function(e){return t.setInfo(!1)}}},[t._v("取消")]),s("div",{staticClass:"sendBtn btn pointer",on:{click:t.setUser}},[t._v("保存")])])])},y=[],x=s("db04"),B=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.headerImage?n("div",[n("div",[n("div",{staticClass:"userAvatar upLoadBox"},[n("img",{attrs:{src:t.headerImage,alt:"userAvatar"}})]),n("div",{staticClass:"btn delete",on:{click:function(e){return t.delImg()}}},[n("img",{attrs:{src:s("b32a"),alt:"delete"}}),t._v(" 删除 ")])])]):n("div",{staticClass:"show"},[n("div",{staticClass:"upLoadBox"},[n("div",{staticClass:"btn"},[n("img",{attrs:{src:s("1a03"),alt:"upLoad"}}),n("span",[t._v("上传附件")]),n("input",{attrs:{type:"file",id:"upload1",accept:"image",alt:"",title:""},on:{change:t.upload}})]),n("div",[n("span",[t._v(t._s(t.msg))])])])])])},E=[],R={props:["setImg"],data:function(){return{msg:"上传的图片大小不能超过5M",headerImage:"",picValue:""}},methods:{delImg:function(){this.headerImage=""},upload:function(t){var e=t.target.files||t.dataTransfer.files;e.length&&(this.picValue=e[0],this.imgPreview(this.picValue))},imgPreview:function(t){var e=this;if(t&&window.FileReader){var s=5242880;if(!(t.size>s)&&/^image/.test(t.type)){var n=new FileReader;n.readAsDataURL(t),n.onloadend=function(){var s=this.result;e.setImg(s,t.type),e.headerImage=this.result}}}}}},j=R,S=(s("9759"),Object(a["a"])(j,B,E,!1,null,"eb00f4da",null)),O=S.exports,Q={props:["userInfo","setInfo"],data:function(){return{nickname:"",cellphone:"",avatar:"",errMsg:""}},components:{PicUpLoad:O},methods:{setImg:function(t,e){this.avatar=t},phoneChecking:function(t){return/\D/.test(t)?(this.errMsg="请输入数字",!1):11===t.length||(this.errMsg="手机号格式有问题",!1)},setUser:function(){var t=this,e={};for(var s in this.userInfo)e[s]=this[s]?this[s]:this.userInfo[s];e.id=this.$store.state.id,this.phoneChecking(e.cellphone)&&Object(x["e"])(e).then((function(e){console.log(e),e.status&&"0000"===e.msg?(t.$root.toast("保存成功"),t.setInfo(!1)):t.$root.toast("保存出现问题")}))}}},T=Q,L=(s("d37f"),Object(a["a"])(T,k,y,!1,null,"791e8ea5",null)),U=L.exports,Y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._l(t.messageList,(function(e,i){return n("div",{key:i+"",staticClass:"message",class:e.obj.id===t.$store.state.id?"me":"",attrs:{id:"message"+i}},[n("img",{staticClass:"avatar",attrs:{src:e.obj.id===t.$store.state.id?t.userInfo.avatar:e.obj.avatar,alt:"avater"}}),n("div",{staticClass:"content"},[n("div",{staticClass:"bubble",class:e.obj.id===t.$store.state.id?"bubble_primary bubble_right":"bubble_default bubble_left"},[e.obj.weibo?n("div",{staticClass:"bubble_cont"},[n("Card",{attrs:{item:e.obj.msg}})],1):e.obj.fileName||e.obj.mp3?n("div",{staticClass:"bubble_cont"},[n("div",{staticClass:"voice",style:{width:500/60*e.obj.timeLength+"px",minWidth:"60px",maxWidth:"500px"},on:{click:function(s){return t.voicePlay(e,i)},dblclick:function(s){return t.translateVoice(e,i)}}},[e.obj.id!==t.$store.state.id?[i!==t.playVioce?n("img",{staticClass:"reverseImg",attrs:{src:s("ffb1"),alt:"左侧"}}):t._e(),i===t.playVioce?n("img",{staticClass:"reverseImg",attrs:{src:s("fb9c"),alt:"左侧"}}):t._e()]:t._e(),n("span",{staticClass:"duration"},[t._v(t._s(e.obj.timeLength)+"''")]),e.obj.id===t.$store.state.id?[i!==t.playVioce?n("img",{attrs:{src:s("ffb1"),alt:"右侧"}}):t._e(),i===t.playVioce?n("img",{attrs:{src:s("fb9c"),alt:"右侧"}}):t._e()]:t._e()],2),n("img",{directives:[{name:"show",rawName:"v-show",value:t.sendIndex===i,expression:"sendIndex === index"}],staticClass:"ico_loading",attrs:{src:s("f291"),alt:"loadding"}})]):n("div",{staticClass:"bubble_cont"},[n("div",{staticClass:"plain"},[n("pre",{},[t._v(t._s(e.obj.msg))]),n("img",{directives:[{name:"show",rawName:"v-show",value:t.sendIndex===i,expression:"sendIndex === index"}],staticClass:"ico_loading",attrs:{src:s("f291"),alt:"loadding"}})])])])]),i===t.showTranslate?n("div",{staticClass:"translateVoice",on:{click:function(e){t.showTranslate=-1}}},[n("pre",[t._v(t._s(e.msg.say||e.msg))]),n("div",{staticClass:"translateDone"},[n("img",{attrs:{src:s("fb61"),alt:"translateDone"}}),n("sub",[t._v("转换完成")])])]):t._e()])})),n("audio",{staticClass:"voicePlayer",staticStyle:{width:"0px",height:"0px"},attrs:{id:"voiceMsgPlayer"}},[n("audio",{ref:"voiceMsgPlayer",attrs:{preload:"metadata"}})])],2)},D=[],N=(s("9911"),{props:["messageList","sendIndex","userInfo"],data:function(){return{showTranslate:-1,createAudio:!1,playVioce:-1}},components:{Card:{props:["item"],render:function(t){var e=JSON.parse(this.item);return t("a",{attrs:{href:e.link,class:"card",target:"_blank"}},[t("h3",e.title),t("div",{},[t("span","来自@ ".concat(e.from," 的微博文章")),t("img",{attrs:{src:e.img}})]),t("span",e.foot)])}}},methods:{voicePlay:function(t,e){var s=this;if(this.sendIndex!==e){var n=this.$refs.voiceMsgPlayer;this.createAudio?(setTimeout((function(){n.pause(),n.src="empty",s.createAudio=!1}),500),this.playVioce=-1):(n.src=t.obj.mp3,n.play(),this.createAudio=!0,this.playVioce=e),n.onended=function(){n.src="empty",s.createAudio=!1,s.playVioce=-1}}},translateVoice:function(t,e){console.log("index",e),this.sendIndex!==e&&(this.showTranslate=e)}}}),K=N,V=(s("4db8"),Object(a["a"])(K,Y,D,!1,null,"5efd4086",null)),G=V.exports,P=(s("99af"),s("4160"),s("d4ec")),q=s("ade3"),M="",F=[{type:"development",url:"ws://106.12.183.175:89"},{type:"production",url:"wss://106.12.183.175:89"}];F.forEach((function(t){"production"===t.type&&(M=t.url)}));var W=function t(e){var s=this;Object(P["a"])(this,t),Object(q["a"])(this,"initWebSocket",(function(){var t="".concat(M,"/chat?id=").concat(s.id);s.websock=new WebSocket(t),s.websock.onmessage=s.websocketonmessage,s.websock.onopen=s.websocketonopen,s.websock.onerror=s.websocketonerror,s.websock.onclose=s.websocketclose})),Object(q["a"])(this,"websocketonopen",(function(){console.log("连接建立")})),Object(q["a"])(this,"websocketonerror",(function(){s.initWebSocket()})),Object(q["a"])(this,"websocketonmessage",(function(t){console.log(t),t.data&&s.wsMsg(JSON.parse(t.data))})),Object(q["a"])(this,"websocketsend",(function(t){console.log(t),s.websock.send(t)})),Object(q["a"])(this,"websocketclose",(function(t){console.log("断开连接",t)})),console.log(e);var n=e.wsMsg,i=e.id;this.websock="",this.wsMsg=n,this.id=i},Z=W,H=s("2f62"),z={components:{Recorder:I,Info:U,ChatMessage:G},data:function(){return{content:"",websocket:new Z({wsMsg:this.wsMsg,id:this.$store.state.id}),userList:[],userId:this.$store.state.id,showInfo:!1,showRecorder:!1,messageList:[],interval:null,sendIndex:null}},mounted:function(){var t=this;Object(x["d"])().then(this.renderContent),this.websocket.initWebSocket(),this.interval=setInterval((function(){t.getUserList(t.getUserList)}),1e3),this.$once("hook:beforeDestroy",(function(){clearTimeout(t.interval),t.interval=null}))},computed:Object(h["a"])({},Object(H["b"])({userInfo:"userInfo"})),methods:{scrollIntoView:function(t){var e=this;t>0&&this.$nextTick((function(){document.getElementById("message"+(t||e.sendIndex)).scrollIntoView()}))},wsMsg:function(t){var e=this;if(console.log("wsMsg-----------------------\n",t),"userlist"!==t.type)console.log("信息进入",t),t.obj.id===this.userId?(this.messageList[this.sendIndex]=t,this.sendIndex=null,console.log("this.messageList",this.messageList)):this.messageList.push(t);else{this.userList=t.obj;var s=this.userList.filter((function(t){return t.id===e.userId})),n=Object(f["a"])(s,1),i=n[0];this.$store.dispatch("setUserInfo",i)}},setInfo:function(t){this.showInfo=t},renderContent:function(t){console.log("renderContent",t.obj),t.obj&&(this.messageList=t.obj),this.scrollIntoView(this.messageList.length-1)},sendChat:function(t,e){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n={id:this.userId,type:"chat",contentType:t,content:e||this.content},i=Object.assign(n,s);console.log("sendObj",JSON.stringify(i)),this.mockWsData(i,t),this.websocket.websocketsend(JSON.stringify(i)),this.scrollIntoView(),this.content=""},mockWsData:function(t,e){this.sendIndex=this.messageList.length;var s={type:"chat",msg:"",obj:{id:this.userId,avatar:this.userInfo.avatar,msg:t.content}},n={status:!0,type:"chat",msg:"",obj:{id:this.userId,avatar:this.userInfo.avatar,msg:"",fileName:"loading",mp3:"loading",timeLength:t.timeLength,size:t.size}};this.messageList.push("text"===e?s:n)},getUserList:function(t){var e={id:this.userId,type:"userlist",contentType:"nil",content:"nil"};this.websocket.websocketsend(JSON.stringify(e))},hiddenRecorder:function(){this.showRecorder=!1},sendRec:function(t,e){var s=t.substr(t.indexOf(",")+1),n={timeLength:Math.ceil(e/1e3),size:s.length};this.hiddenRecorder(),this.sendChat("mp3",s,n),console.log("readerData",t)},exit:function(){var t=this;Object(x["b"])().then((function(e){e.status&&"0000"===e.msg?(t.$root.toast("退出成功"),t.$router.push("/login")):t.$root.toast("退出出现问题")}))}}},X=z,_=(s("14c3"),Object(a["a"])(X,u,A,!1,null,null,null)),J=_.exports;n["default"].use(d["a"]);var $=[{path:"/",name:"chat",component:J,meta:{requireAuth:!0}},{path:"/login",name:"login",component:function(){return s.e("chunk-6d90f167").then(s.bind(null,"a55b"))}}],tt=new d["a"]({mode:"hash",base:"/",routes:$}),et=tt,st=s("4360"),nt=(s("68d3"),s("c51a"),s("4107"),s("b485")),it=s.n(nt);n["default"].config.productionTip=!1,n["default"].use(it.a),et.beforeEach((function(t,e,s){console.log("store",st["a"],st["a"].state.id),t.matched.some((function(t){return t.meta.requireAuth}))?st["a"].state.id?s():s({path:"/login"}):s()})),new n["default"]({router:et,store:st["a"],data:{Rec:v.a},methods:{toast:function(t){this.$toast(t,{duration:1e3,mode:"override",closeable:!1,horizontalPosition:"center",verticalPosition:"top",transition:"fade",className:["","my-class"],customClass:".et-wrapper.my-class {background-color: red;}"})}},render:function(t){return t(l)}}).$mount("#app")},"73a0":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACwUlEQVRYR81Xy2pUQRA9dfMB/oFGiSiOSNLVuBcXLpSIr4DiIi41GwWjO43ufIBukizNQhQSHxh04ULcy61OECMGRaN/4AfkljTMDXdm7qN7TNDZDXPq9Knqqq4zhD4+1tqzqnoCwJl2+AIRvUzT9GksHcUGeLy19rmqnizGEtGLNE1PxfL1JYCZPwFodR22IiL7N0WAMWYIwHkAj51z33JSZt4OYAzAvYqDJgHMi8iv/Pcqrvz3ngows7/X+RygqrcArBHRQQDnAGxryPI3gCeq+gHAIBHdLODHRGSh4+qKX0ZGRvYlSbISW8YYfJZlraWlpc+lFTDGTHUpjuEOwvqKOuemqgQMEdHXIKY+Qaq6u9hXPT2wlVXozt7n0NiEfSZaFVbfhD6KmWcAXNzkg3O6WRG5VDkF7Tn/GDBqUNXFJEm+e7Isy3YR0WiAaD+iB4rvRMcVGGPuENG1AKKeUna/H1UcqnrXOXd9YwqstaOqegTAYQB7mg5XVeuckzKcMYaJKG3iALAK4B0RvSVm9gEcEOQhb0TkWB2WmV8DOBrIJ16ABoI9bEZEJhoETAPoaLQ6fJQAInqYpumVOkJr7QNVvRyalBfgF09uLGrjfOc7547XgYwxrwInwtMskHc3AE6rqm/A7h1fdlbPBOSg0EkAsEJEvhGfdYwhM1+t2fUbYsomIWICJkXk/sYYFlOMeYj8RAD42Y7fEdj59Q/RP3+KvQBjzDgRPQrt4hicql5wzs1V7oK2gC0zJY3reHh4eHBgYOBHTFax2PX19Z3Ly8trpU24lWYkP/D/t2RltpyIvFM+FGPLAbxX1VaULc/L5O05EY1lWTZXvC//TqjqRJVn8LueiKaLhsP3VZIk46o6X7TjpT0Q2lDM/KXEO6yKyN5Qjr8VULZyG1d1mbi+/py2XdSNgpERIrqdpulibAX+AHByOOf+RmjSAAAAAElFTkSuQmCC"},"85ec":function(t,e,s){},"8c7b":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAmElEQVQ4T6XTsQ3CQAyF4S+UFNAyA0wQISQWoKFgHGAKSsZgAgQbsA7IiEQRKMpx95pr7N/22a/CEQdpumHZDa3wxAKPBEYUipwo+lYDiDdFTWI2YP6p0nb7bwc/XeYC1hjjkgvY4oy6DxCz7gZ+dYNJKWBaMsIJs1xAjXvOIRWvsfiQek851Ux7jL7NFA5rzTGw+ytW3ZgXywAf8TANSQIAAAAASUVORK5CYII="},9759:function(t,e,s){"use strict";var n=s("d652"),i=s.n(n);i.a},"9dc2":function(t,e,s){},"9e56":function(t,e,s){t.exports=s.p+"img/voice.53462099.png"},b32a:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAFY0lEQVR4Xu1bXWgcVRT+zmb3Ji+CCAV/srMJmmameYjYSqUiVFqrouIPFG0DUou0WG0fYkX0xfqg4N+LwWKVUsFWq4JKhWrF0j5URTRWCunuplXsbKygNYKR1NzNzJHZbNKZzWzmTnZ3dh9mYB927rnnfOebc8+998xcQsTXSGdqZVuCHgCwBsBVAK4G6ASDTxDwY9Kmk9eNTZ2NChZFZWhUa7/bBm8BcE+QTSYcZCQHl52b/D1Ittb2SAjIaWI/gIGQYCcZPGiYxT0h+4USbzgBOU38BeCKUKhcwgQc7jXlXYvtH9SvoQTkNHFIJeSDQDJ4q2EW3wqSW0x7wwjIplOvEtGTC4AaJtCw087g5QCcX9XLsvmmvrHid4txcqE+DSEgr3WsYdhf+RomnGKbnjIKU1+620fSyVvakHgGhDurAB62bLmubwzj9SShIQTkNHEQwIM+QF/WTfn0Qg7kM+IFZjzrJ8PMrxmF4s6WJmCkD6JtQvwDoL0C6BHdlHeogM9lxF4wNs+X5aO6WVyrokNVpu4RkE23ryPiI5UAiLGhtyCdyAi8RjPCsBmnfQTHLVv21HMYNICA1CYi2lcBvqCbUgv03CWQ08QPfomRkFjba/53NIyuUEkw29XRBdveVIsBAp6rpf+CgIl22pZVmj3CXsbY9PF5kem+kdfEPgZqcj4sqIjlxxl8wDCLO2btzg2BbGdyNSUSxyIG1BxzNvr1MXnKMX6JgLR4jwgbmoMocqvv6qZ82EPAqNa+3Qa/HjmUJhhMgHYsNaeGPAQ4f3Ka4Cbgidykbsq5yJ83DeY0sR7M2zyoiFZHjrIeBpm9WZ9ot27Kj9yqA9cBVZMj83G9ULy1HjjrocMXpwLGmIAg9uMIqLY+UAivIHLr2R4PAb8HpfCQ4hwQFIZxDohzQJVN0gLjq/z2ZztAE4C1Xzenv/aLtKwmdhFwIxinyZIv9Z7HBbecqh6nT8skwayWWk4gp5gxdzF4hWEWPXv4rJbaQiD3S49h3ZQrZjup6pmTb5UkmEuLV0DwFC4ZPOTeg5f3HU5UrHITlWBsXFqQ75faFfW0IAGpY6jcO/gMF7+NFwPPG6bcNUOAmp6YgDIDLZMDVJ9cHAE+tYd4CMQ5IE6C8SwQT4PxOiBeCMUrwXgpHO8F4s1QvBtU3VTF2+F4OzzDQMvUA/Lp1BATPeEpgjLt1QtTj7rv5TRxEsD1ntoh8yNGofiOc09VT+sNgYwYAMP5OvxSUZTsm41z09+475Urwp6PqayL8rK+P/FvaR2gqKflCCiFYya5ijixrVQWJz6hn5MHPBExO25dZfEk057KgxKqelpqCPg5GsW9lskBUTjrG02Nei9wOpO6IcEzn7V7xjXwrWFKT12/Wc47dstHcj6rwHBIN+W9C+EKfDt85kossYT4w0fJr7opu5vpdFBSBfNuvVB8vCYCShlZE38DuLxCkeygZFdXBAebVEjOaeILALd7w5Qf0wvFN2snICM+AeM+n2EwV8NTAdkomSrhjymrLd3/28Wxmgnwm7PLSs+3Abf1mNLv0/ZG+TtPb5WzSYd1hcNWgTnAsZbvTvWzRT/5eUTACMPeisnpU/oFTETmtbPemHkT7ZxAWT8/OnmLYRbfDsKjRECJhIz4mBn3BylshXYCfsG0XFn5vUGVB6gGOd8ldLbhHIS6Rq1H86SI8VBvQX6ggkA5AsqzgRNqH6oobpaM+/2iCoZQBMyRwPwGiJaoGIhSJqzzDrbQBDidzqTbr7VgDxLRZgY6onSyyjj+3mK8uKwgPw2LZVEEzBr5ubO9RyZ4IAF0M3OoQ1FhgVbKE2icCWfZtj/3Owukqv9/STkIjIar8BUAAAAASUVORK5CYII="},c8f0:function(t,e,s){},d37f:function(t,e,s){"use strict";var n=s("9dc2"),i=s.n(n);i.a},d652:function(t,e,s){},db04:function(t,e,s){"use strict";s("99af"),s("4160"),s("caad"),s("d3b7"),s("2532");var n=s("4328"),i=s.n(n),o=s("4360"),a="",r=[{type:"development",url:"/apis"},{type:"production",url:"https://106.12.183.175:89/api"}];function c(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t=a+t,e=Object.assign({credentials:"include",headers:{timestamp:+new Date}},e),e.headers.Accept="application/json",e.headers.Authorization=o["a"].state.id,e.method||(e.method="GET"),e.hasOwnProperty("params")){if(/^(GET|DELETE|HEAD|OPTIONS)$/i.test(e.method)){var s=t.includes("?")?"&":"?";t+="".concat(s).concat(i.a.stringify(e.params))}delete e.params}return/^(POST|PUT)$/i.test(e.method)&&(e.type||(e.type="urlencoded"),"urlencoded"===e.type&&(e.headers["Content-Type"]="application/x-www-form-urlencoded",e.body=i.a.stringify(e.body)),"json"===e.type&&(e.headers["Content-Type"]="application/json",e.body=JSON.stringify(e.body))),fetch(t,e).then((function(t){if(!/^(2|3)\d{2}$/.test(t.status)){switch(t.status){case 401:break;case 403:break;case 404:break}return Promise.reject(t)}return t.data?t.data.json():t.json()})).catch((function(t){if(window.navigator.onLine)return console.warn("fetch error",t),Promise.reject(t)}))}function l(t){return c("/sign",{method:"post",body:t})}function d(t){return c("/adduser",{method:"post",body:t})}function u(t){return c("/user/setuser",{method:"post",body:t})}function A(){return c("/exit",{method:"GET"})}function f(t){return c("/user/records",{method:"post",body:t})}console.log("process.env.NODE_ENV","production"),console.log("process.env.PUBLIC_URL",Object({NODE_ENV:"production",BASE_URL:"/"}).PUBLIC_URL),r.forEach((function(t){"production"===t.type&&(a=t.url)})),s.d(e,"c",(function(){return l})),s.d(e,"a",(function(){return d})),s.d(e,"e",(function(){return u})),s.d(e,"b",(function(){return A})),s.d(e,"d",(function(){return f}))},f291:function(t,e){t.exports="data:image/gif;base64,R0lGODlhEAAQAPQAACYmJri4u5CQkKGhoVxcXLq6ugYGBm5ubisrKzY2Nri4uI2NjWpqalhYWJ+fnwAAAP///////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQFBwARACwAAAAAEAAQAAAFT2AkjhEEkaSikCb5PKK6iq34wrFKn9GNyqWTDxXRjV7EZNLBZBIBUGjTiYpCldjRYkFqNJJbLoMR8RJQYdFYZNZuR2t24xx5w8kjrzKOCgEAIfkEBQcAEQAsAAAAABAAEAAABU9gJI6RopCk45AmCUGiuoqt+MKxSp/Rjcqlkw8V0Y1exGRywWQSH1Bo04mKQpXYEYNBAgCSW26jEfEiUGHRWGTWbkdrNuAcecPJI68yjgoBACH5BAUHABEALAAAAAAQABAAAAVPYCSOkeOQ5LKQJqkoorqKrfjCsUqf0Y3KpZMPFdGNXsRkksFkEiFQaNOJikKV2FGjQXo8kltuIhHxGlBh0Vhk1m5Ha/bjHHnDySOvMo4KAQAh+QQFBwARACwAAAAAEAAQAAAFTmAkjtGykCTDkCbpOKK6iq34wrFKn9GNyqWTDxXRjV7EZLLBZBIVUGjTiYpCldhRIkGCQJJb7uMR8X5JYdFYZNZuR2u2V/SGk0fzZBwVAgAh+QQFBwARACwAAAAAEAAQAAAFT2AkjhHDkGTTkCa5LKK6iq34wrFKn9GNyqWTDxXRjV7EZDLBZBIdUGjTiYpCldjR40FSKJJbLgQS8RZQYdFYZNZuR2u24hx5w8kjrzKOCgEAIfkEBQcAEQAsAAAAABAAEAAABU9gJI5R05BkkpAmyTCiuoqt+MKxSp/Rjcqlkw8V0Y1exGTywWQSF1Bo04mKQpXYEQRCcjiSW65CEfEOUGHRWGTWbkdrtuMcecPJI68yjgoBACH5BAUHABEALAAAAAAQABAAAAVPYCSOUZKQ5POQJtk0orqKrfjCsUqf0Y3KpZMPFdGNXsRkEsJkEhlQaNOJikKV2FEgQFoskluuwxHxClBh0Vhk1m5Ha/biHHnDySOvMo4KAQAh+QQFBwARACwAAAAAEAAQAAAFT2AkjtHzkCQEkSaZJKK6iq34wrFKn9GNyqWTDxXRjV7EZFLBZBIbUGjTiYpCldiRw0FiMJJb7mIR8R5QYdFYZNZuR2s24xx5w8kjrzKOCgEAOw=="},fb61:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABOklEQVQ4T6WTv0rEQBDGv8kG0ooWNhaiL3AklQHBBxARsbD1KrHTzkpszk47/zRyyBUKvoWQKhtNZ+GB2CtYLmR3ZI+shJiDC1mYhZ2d77ezuzOE2kiSZD4Igl0A66XZiGdrSqmnOI6/qxKqLrIs22PmcwDLdXC5/iCikzAMH9z+H0BKyVNEje4oiibaySSlvABw1AYA4DKKomPK83ypKIpXAAstAV++7/dISrkP4G5G8aMx5s3zvNMyvk9pml4T0cEMgKFS6jAIghGAHRvPzDc2g3cAqw5gjDmrnODcV0KIQVEUIyLaqBw2/gfwPG/bGLMI4LYMHDCz/bZ7IurVMh03XeFHa73l+/4aMyut9YsQYthUG+4KTY/4ycybQogVY4wVz015o373b+xcSC61TqXsIJ2ayUHatvMv7lOWO1vIasUAAAAASUVORK5CYII="},fb9c:function(t,e,s){t.exports=s.p+"img/chat.e4dd405f.gif"},ffb1:function(t,e,s){t.exports=s.p+"img/chat.b304f9f9.png"}});
//# sourceMappingURL=app.02306398.js.map